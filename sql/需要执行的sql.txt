-- 菜品增加原图字段
ALTER TABLE `mos_goods`
ADD COLUMN `originUrl`  text NULL COMMENT '原图路径url' AFTER `detail`;

-- 设置空的原图为裁剪图
UPDATE mos_goods SET originUrl=imgUrl;

-- 商家表增加一个默认商米打印机
ALTER TABLE `mos_contact`
ADD COLUMN `smprinterId`  int(11) NULL DEFAULT NULL COMMENT '餐厅前台商米打印机id' AFTER `latitude`;

-- 规格增加排序字段
ALTER TABLE `mos_goods_spec`
ADD COLUMN `gs_spec_order`  int(11) NOT NULL DEFAULT 1 AFTER `is_repeat`;
ADD COLUMN `gs_spec_order`  int(11) NOT NULL DEFAULT 1 AFTER `is_repeat`;
ADD COLUMN `gs_spec_order`  int(11) NOT NULL DEFAULT 1 AFTER `is_repeat`;

-- 设置user表为空的头像head为商家表的logourl
update mos_user,mos_contact set mos_user.head = mos_contact.logoUrl 
where mos_user.contact_number = mos_contact.number 
and mos_user.head is null;

-- 菜品分类排序默认为100
UPDATE mos_category SET ordnum=ordnum+100

-- 增加一个商家公告字段
CREATE TABLE `mos_notice` (
`id`  int(11) UNSIGNED NOT NULL AUTO_INCREMENT ,
`number`  varchar(50) NOT NULL COMMENT '商家编号' ,
`content`  varchar(512) NULL DEFAULT NULL COMMENT '公告内容' ,
`background`  int(2) NULL DEFAULT 0 COMMENT '背景颜色编号' ,
`updatetime`  int(11) NULL DEFAULT 0 COMMENT '公告修改时间' ,
PRIMARY KEY (`id`)
);

ALTER TABLE `mos_contact`
ADD COLUMN `addOrderPrint`  tinyint(1) NULL DEFAULT 0 COMMENT '加菜订单打印的客户联是否包含全部菜品：1是，0不是' AFTER `laterPay`;

ALTER TABLE `mos_contact`
MODIFY COLUMN `fee`  smallint(6) NULL DEFAULT 0 COMMENT '每人茶位费' AFTER `isDelete`,
MODIFY COLUMN `is_cover_charge`  tinyint(4) NULL DEFAULT 0 COMMENT '是否收茶位费' AFTER `fee`,
ADD COLUMN `service_fee`  decimal(6,2) NULL DEFAULT 0 COMMENT '服务费率' AFTER `is_cover_charge`,
ADD COLUMN `is_service_fee`  tinyint(1) NULL DEFAULT 0 COMMENT '是否收服务费' AFTER `service_fee`;


ALTER TABLE `mos_contact`
ADD COLUMN `cleanStartTime`  time NULL DEFAULT '00:00:01' COMMENT '清机开始时间 如00:00:01' AFTER `is_service_fee`,
ADD COLUMN `cleanEndTime`  time NULL DEFAULT '23:59:59' COMMENT '清机结束时间 如23:59:59' AFTER `cleanStartTime`;

ALTER TABLE `mos_pay_method`
ADD COLUMN `online`  tinyint(1) NULL DEFAULT 0 COMMENT '是不是线上支付：1是，0不是' AFTER `minLimit`;

--多语言字段
ALTER TABLE `mos_category`
ADD COLUMN `name_en`  varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '菜品分类英文' AFTER `name`,
ADD COLUMN `name_other`  varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '菜品分类其他语言' AFTER `name_en`;

ALTER TABLE `mos_goods`
ADD COLUMN `name_en`  varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '商品名称' AFTER `name`,
ADD COLUMN `name_other`  varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '商品名称' AFTER `name_en`,
ADD COLUMN `remark_en`  varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '备注' AFTER `remark`,
ADD COLUMN `remark_other`  varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '备注' AFTER `remark_en`,
ADD COLUMN `detail_en`  text CHARACTER SET utf8 COLLATE utf8_general_ci NULL COMMENT '详情' AFTER `detail`,
ADD COLUMN `detail_other`  text CHARACTER SET utf8 COLLATE utf8_general_ci NULL COMMENT '详情' AFTER `detail_en`;

ALTER TABLE `mos_set_meal_category`
ADD COLUMN `name_en`  varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '套餐分类英文' AFTER `name`,
ADD COLUMN `name_other`  varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '套餐分类其他语言' AFTER `name_en`;

ALTER TABLE `mos_set_meal`
ADD COLUMN `name_en`  varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '套餐名称' AFTER `name`,
ADD COLUMN `name_other`  varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '套餐名称' AFTER `name_en`,
ADD COLUMN `remark_en`  varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '备注' AFTER `remark`,
ADD COLUMN `remark_other`  varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '备注' AFTER `remark_en`,
ADD COLUMN `detail_en`  text CHARACTER SET utf8 COLLATE utf8_general_ci NULL COMMENT '详情' AFTER `detail`,
ADD COLUMN `detail_other`  text CHARACTER SET utf8 COLLATE utf8_general_ci NULL COMMENT '详情' AFTER `detail_en`;

ALTER TABLE `mos_spec`
ADD COLUMN `spec_name_en`  varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '规格名称英文' AFTER `spec_name`,
ADD COLUMN `spec_name_other`  varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '规格名称其他语言' AFTER `spec_name_en`;

-- 商家关闭的线下支付方式
ALTER TABLE `mos_contact`
ADD COLUMN `offpaytype`  varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '商家关闭的线下支付方式json' AFTER `cleanEndTime`;

-- 餐盒费字段
ALTER TABLE `mos_contact`
ADD COLUMN `box_fee`  decimal(6,0) NULL DEFAULT 0.00 COMMENT '餐盒费' AFTER `is_service_fee`,
ADD COLUMN `is_box_fee`  tinyint(1) NULL DEFAULT 0 COMMENT '是否收取餐盒费' AFTER `box_fee`;

-- 订单餐盒费用(未执行)
ALTER TABLE `mos_wx_order`
ADD COLUMN `box_frees`  decimal(6,2) NULL DEFAULT 0.00 COMMENT '餐盒费' AFTER `tea_fees`;

-- 服务费，茶位费，菜品总价字段
ALTER TABLE `mos_wx_order`
ADD COLUMN `service_fees`  decimal(6,2) NULL DEFAULT 0.00 COMMENT '订单服务费' AFTER `moneyPaid`,
ADD COLUMN `tea_fees`  decimal(6,2) NULL DEFAULT 0.00 COMMENT '订单茶位费' AFTER `service_fees`,
ADD COLUMN `foodsAmount`  decimal(10,2) NULL DEFAULT 0.00 COMMENT '菜品总价' AFTER `tea_fees`;

-- 就餐人数
ALTER TABLE `mos_wx_order`
ADD COLUMN `personCount`  int(2) NULL DEFAULT 1 COMMENT '就餐人数' AFTER `foodsAmount`;

-- 支付类型是线上还是线下字段方便统计
ALTER TABLE `mos_wx_order`
ADD COLUMN `online`  int(1) NULL DEFAULT 0 COMMENT '是不是线上支付：1是，0不是' AFTER `orderType`;

--修改费用字段长度到10
ALTER TABLE `mos_wx_order`
MODIFY COLUMN `service_fees`  decimal(10,2) NULL DEFAULT 0.00 COMMENT '订单服务费' AFTER `moneyPaid`,
MODIFY COLUMN `tea_fees`  decimal(10,2) NULL DEFAULT 0.00 COMMENT '订单茶位费' AFTER `service_fees`,
MODIFY COLUMN `box_frees`  decimal(10,2) NULL DEFAULT 0.00 COMMENT '餐盒费' AFTER `tea_fees`;

-- 折扣字段
ALTER TABLE `mos_wx_order`
ADD COLUMN `discount`  decimal(10,2) NULL DEFAULT 10.00 COMMENT '折扣' AFTER `moneyPaid`

-- 跟餐规格价格
ALTER TABLE `mos_addon_foods`
ADD COLUMN `spec_price`  json NULL AFTER `addon_price`

-- 订单总价
ALTER TABLE `mos_wx_order`
ADD COLUMN `orderAmount`  decimal(10,2) NULL DEFAULT 0.00 COMMENT '订单总价' AFTER `moneyPaid`;
UPDATE mos_wx_order SET orderAmount=goodsAmount;

-- 增加一个支付token字段
ALTER TABLE `mos_wx_order`
ADD COLUMN `payToken`  varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '可用token继续完成支付' AFTER `orderAssignedNumber`;

-- 同步打印的关联打印机
ALTER TABLE `mos_contact_department`
ADD COLUMN `reprinterId`  int(11) NULL DEFAULT 0 COMMENT '同时打印的关联打印机' AFTER `printerId`;



















